Q123: Read a text file and count the total number of characters, words, and lines. A word is defined as a sequence of non-space characters separated by spaces or newlines.

/*
Sample Test Cases:
Input 1:
File: sample.txt (Content: Hello world\nThis is C programming)
Output 1:
Characters: 31
Words: 5
Lines: 2

*/
#include <stdio.h>
#include <stdlib.h> // Required for EXIT_FAILURE
#include <ctype.h>  // Required for isspace()

int main() {
    FILE *file_pointer;
    char ch;
    int characters = 0, words = 0, lines = 0;
    int inWord = 0; // Flag to track if the current character is part of a word (1 for true, 0 for false)

    // Open the file "sample.txt" in read mode ("r")
    // Note: The file "sample.txt" must exist in the same directory as the program.
    file_pointer = fopen("sample.txt", "r");

    if (file_pointer == NULL) {
        perror("Error opening file");
        // Print instructions for the user to create the file for testing
        printf("Please ensure 'sample.txt' exists with content like: \"Hello world\\nThis is C programming\\n\"");
        return EXIT_FAILURE;
    }

    // Read characters from the file one by one until the end of the file is reached
    while ((ch = fgetc(file_pointer)) != EOF) {
        characters++; // Increment character count for every character read

        // Check for a new line
        if (ch == '\n') {
            lines++;
        }

        // Check for word boundaries using isspace()
        if (isspace(ch)) {
            inWord = 0; // If it's a space/newline/tab, we are "out" of a word
        } else if (inWord == 0) {
            // If it's a non-space character and we were previously "out" of a word,
            // it signifies the start of a new word
            inWord = 1; // We are now "in" a word
            words++;    // Increment the word count
        }
    }

    // Close the file
    fclose(file_pointer);

    // Adjust counts for specific edge cases:
    // If the file is not empty and the last line doesn't end with a newline character,
    // the line count may be off by one in some logic implementations. The logic above
    // handles this naturally as it increments lines on encountering '\n'.
    // If the file ends with a word but not a space/newline, the `words` count is correct due to the 'inWord' logic.

    // Print the final counts
    printf("Characters: %d\n", characters);
    printf("Words: %d\n", words);
    printf("Lines: %d\n", lines);

    return 0;
}
